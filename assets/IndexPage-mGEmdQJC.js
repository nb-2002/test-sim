import{d as I,r as s,o as z,c as E,a as g,n as T,b as q}from"./index-B7qX9KF6.js";const A={class:"canvas-container"},G={class:"onCanvas"},H=I({__name:"IndexPage",setup(b){const v=s(null),e=s(null),l=s(1),t=s(0),o=s(0),k=s(!1),r=s(0),h=s(0),p=s(!1),d=s(!1),w=s(!1),i=s([[[]]]),n=s(0),m=()=>{v.value&&(v.value.width=window.innerWidth,v.value.height=window.innerHeight,f())};function C(u){u.preventDefault();const a=u.deltaY<0?1.1:.9;l.value*=a;const c=u.clientX,M=u.clientY;t.value=c-(c-t.value)*a,o.value=M-(M-o.value)*a,f()}const P=u=>{if(k.value=!0,r.value=u.clientX,h.value=u.clientY,d.value){const a=(r.value-t.value)/l.value,c=(h.value-o.value)/l.value;n.value==0?(i.value.length==0?i.value.push([[a,c]]):(i.value[0][0].push(a),i.value[0][0].push(c)),n.value++):(i.value[n.value-1].length<=2&&i.value[n.value-1].push([a,c]),i.value.push([[a,c]]),n.value++),f()}},y=u=>{if(k.value&&p.value){const a=u.clientX-r.value,c=u.clientY-h.value;t.value+=a,o.value+=c,r.value=u.clientX,h.value=u.clientY,f()}k.value&&d.value&&(w.value=!0,r.value=u.clientX,h.value=u.clientY,f())},_=()=>{k.value=!1,w.value&&i.value[n.value-1].push([(r.value-t.value)/l.value,(h.value-o.value)/l.value]),w.value=!1},f=()=>{v.value&&(e.value=v.value.getContext("2d"))&&(e.value.clearRect(0,0,v.value.width,v.value.height),e.value.save(),e.value.translate(t.value,o.value),e.value.scale(l.value,l.value),x(),Y(),B(),e.value.restore())},x=()=>{if(e.value){const u=50*l.value;e.value.strokeStyle="#ccc",e.value.lineWidth=l.value>5?1:l.value<.2?4:2;for(let a=(Math.floor(-t.value/u)*u-u/2)/l.value;a<(v.value.width-t.value)/l.value;a+=u/l.value)e.value.beginPath(),e.value.moveTo(a,-o.value/l.value),e.value.lineTo(a,(v.value.height-o.value)/l.value),e.value.stroke();for(let a=Math.floor(-o.value/u)*u/l.value;a<(v.value.height-o.value)/l.value;a+=u/l.value)e.value.beginPath(),e.value.moveTo(-t.value/l.value,a),e.value.lineTo((v.value.width-t.value)/l.value,a),e.value.stroke()}},Y=()=>{e.value&&(e.value.strokeStyle="#a0a0a0",e.value.lineWidth=3,e.value.beginPath(),e.value.moveTo(Math.floor(v.value.width/50)/2*50,-o.value/l.value),e.value.lineTo(Math.floor(v.value.width/50)/2*50,(v.value.height-o.value)/l.value),e.value.moveTo(-t.value/l.value,Math.floor(v.value.height/50)/2*50),e.value.lineTo((v.value.width-t.value)/l.value,Math.floor(v.value.height/50)/2*50),e.value.stroke())},B=()=>{if(e.value)for(const[u,a]of i.value.entries()){if(w.value&&u==n.value-1){e.value.beginPath(),e.value.arc((r.value-t.value)/l.value,(h.value-o.value)/l.value,5,0,Math.PI*2),e.value.fillStyle="#1111aa",e.value.fill();continue}a.length==2?(e.value.strokeStyle="#111111",e.value.lineWidth=50,e.value.beginPath(),e.value.moveTo(a[0][0],a[0][1]),e.value.lineTo(a[1][0],a[1][1]),e.value.stroke()):a.length==3&&(e.value.strokeStyle="#111111",e.value.lineWidth=50,e.value.beginPath(),e.value.moveTo(a[0][0],a[0][1]),e.value.quadraticCurveTo(a[1][0],a[1][1],a[2][0],a[2][1]),e.value.stroke()),u>0&&u<n.value-1&&(e.value.beginPath(),e.value.arc(a[0][0],a[0][1],25,0,Math.PI*2),e.value.fillStyle="#111111",e.value.fill())}};z(()=>{m(),window.addEventListener("resize",m)});const X=()=>{t.value=0,o.value=0,l.value=1,f()},S=()=>{d.value=!1,p.value=!p.value},W=()=>{p.value=!1,d.value=!d.value},D=()=>{n.value>0&&(console.log(n.value,i.value),i.value.pop(),n.value-=1,n.value>0&&i.value[n.value-1].pop(),f())};return(u,a)=>(q(),E("div",A,[g("div",G,[g("button",{class:"button",onClick:X}," center "),g("button",{class:T(["button buttons",{button_active:p.value}]),onClick:S}," move ",2),g("button",{class:T(["button buttons",{button_active:d.value}]),onClick:W}," draw ",2),g("button",{class:"button buttons",onClick:D}," undo ")]),g("canvas",{onWheel:C,onMousedown:P,onMouseup:_,onMouseleave:_,onMousemove:y,ref_key:"canvas",ref:v},null,544)]))}}),L=(b,v)=>{const e=b.__vccOpts||b;for(const[l,t]of v)e[l]=t;return e},O=L(H,[["__scopeId","data-v-1031c842"]]);export{O as default};
