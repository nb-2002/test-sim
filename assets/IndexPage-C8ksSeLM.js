import{d as I,r as o,o as z,c as E,a as f,n as T,b as q}from"./index-Ba3trpRE.js";const A={class:"canvas-container"},G={class:"onCanvas"},H=I({__name:"IndexPage",setup(b){const t=o(null),e=o(null),u=o(1),v=o(0),n=o(0),k=o(!1),i=o(0),c=o(0),g=o(!1),d=o(!1),p=o(!1),r=o([[[]]]),s=o(0),_=()=>{t.value&&(t.value.width=window.innerWidth,t.value.height=window.innerHeight,h())};function C(l){l.preventDefault();const a=l.deltaY<0?1.1:.9;u.value*=a;const w=l.clientX,M=l.clientY;v.value=w-(w-v.value)*a,n.value=M-(M-n.value)*a,h()}const P=l=>{k.value=!0,i.value=l.clientX,c.value=l.clientY,d.value&&(s.value==0?(r.value[0][0].push(i.value),r.value[0][0].push(c.value),s.value++):(r.value[s.value-1].push([i.value,c.value]),r.value.push([[i.value,c.value]]),s.value++),h())},y=l=>{if(k.value&&g.value){const a=l.clientX-i.value,w=l.clientY-c.value;v.value+=a,n.value+=w,i.value=l.clientX,c.value=l.clientY,h()}k.value&&d.value&&(p.value=!0,i.value=l.clientX,c.value=l.clientY,h())},m=()=>{k.value=!1,p.value&&r.value[s.value-1].push([i.value,c.value]),p.value=!1},h=()=>{t.value&&(e.value=t.value.getContext("2d"))&&(e.value.clearRect(0,0,t.value.width,t.value.height),e.value.save(),e.value.translate(v.value,n.value),e.value.scale(u.value,u.value),x(),B(),Y(),e.value.restore())},x=()=>{if(e.value){const l=50*u.value;e.value.strokeStyle="#ccc",e.value.lineWidth=u.value>5?1:u.value<.2?4:2;for(let a=(Math.floor(-v.value/l)*l-l/2)/u.value;a<(t.value.width-v.value)/u.value;a+=l/u.value)e.value.beginPath(),e.value.moveTo(a,-n.value/u.value),e.value.lineTo(a,(t.value.height-n.value)/u.value),e.value.stroke();for(let a=Math.floor(-n.value/l)*l/u.value;a<(t.value.height-n.value)/u.value;a+=l/u.value)e.value.beginPath(),e.value.moveTo(-v.value/u.value,a),e.value.lineTo((t.value.width-v.value)/u.value,a),e.value.stroke()}},B=()=>{e.value&&(e.value.strokeStyle="#a0a0a0",e.value.lineWidth=3,e.value.beginPath(),e.value.moveTo(Math.floor(t.value.width/50)/2*50,-n.value/u.value),e.value.lineTo(Math.floor(t.value.width/50)/2*50,(t.value.height-n.value)/u.value),e.value.moveTo(-v.value/u.value,Math.floor(t.value.height/50)/2*50),e.value.lineTo((t.value.width-v.value)/u.value,Math.floor(t.value.height/50)/2*50),e.value.stroke())},Y=()=>{if(e.value)for(const[l,a]of r.value.entries()){if(p.value&&l==s.value-1){e.value.beginPath(),e.value.arc(i.value,c.value,5,0,Math.PI*2),e.value.fillStyle="#1111aa",e.value.fill();continue}a.length==2?(e.value.strokeStyle="#111111",e.value.lineWidth=50,e.value.beginPath(),e.value.moveTo(a[0][0],a[0][1]),e.value.lineTo(a[1][0],a[1][1]),e.value.stroke()):a.length==3&&(e.value.strokeStyle="#111111",e.value.lineWidth=50,e.value.beginPath(),e.value.moveTo(a[0][0],a[0][1]),e.value.quadraticCurveTo(a[1][0],a[1][1],a[2][0],a[2][1]),e.value.stroke()),l>0&&l<s.value-1&&(e.value.beginPath(),e.value.arc(a[0][0],a[0][1],25,0,Math.PI*2),e.value.fillStyle="#111111",e.value.fill())}};z(()=>{_(),window.addEventListener("resize",_)});const X=()=>{v.value=0,n.value=0,u.value=1,h()},S=()=>{d.value=!1,g.value=!g.value},W=()=>{g.value=!1,d.value=!d.value},D=()=>{s.value>0&&(console.log(s.value,r.value),r.value.pop(),s.value-=1,h())};return(l,a)=>(q(),E("div",A,[f("div",G,[f("button",{class:"button",onClick:X}," center "),f("button",{class:T(["button buttons",{button_active:g.value}]),onClick:S}," move ",2),f("button",{class:T(["button buttons",{button_active:d.value}]),onClick:W}," draw ",2),f("button",{class:"button buttons",onClick:D}," undo ")]),f("canvas",{onWheel:C,onMousedown:P,onMouseup:m,onMouseleave:m,onMousemove:y,ref_key:"canvas",ref:t},null,544)]))}}),L=(b,t)=>{const e=b.__vccOpts||b;for(const[u,v]of t)e[u]=v;return e},O=L(H,[["__scopeId","data-v-76737349"]]);export{O as default};
